(this["webpackJsonpreact-typescript-authentication-example"]=this["webpackJsonpreact-typescript-authentication-example"]||[]).push([[0],{108:function(e,t,a){},235:function(e,t,a){},240:function(e,t,a){"use strict";a.r(t);var c=a(59),n=a.n(c),s=a(24),r=(a(108),a(4)),i=a(0),l=a(7),o=a(13),d=a(25),j=a(2),b=a(18),m=a.n(b),u={on:function(e,t){document.addEventListener(e,(function(e){return t(e)}))},dispatch:function(e,t){document.dispatchEvent(new CustomEvent(e,{detail:t}))},remove:function(e,t){document.removeEventListener(e,t)}},p={BACKEND_URL:"",NAV_LINKS:[{path:"/home",label:"Home",public:!0},{path:"/wallet",label:"Wallet",public:!1},{path:"/mint",label:"Mint",public:!1},{path:"/gallery",label:"NFT Gallery",public:!1}]},h=function(e){return 401===e.status&&u.dispatch("logout"),e.data},O=function(){var e=localStorage.getItem("user");return e?JSON.parse(e):null},f=function(){var e=localStorage.getItem("user"),t=null;return e&&(t=JSON.parse(e)),t&&t.token?{Authorization:"Bearer "+t.token}:{Authorization:""}},x=a(1),g=function(e){var t=e.history,a=Object(i.useState)(!1),c=Object(r.a)(a,2),n=c[0],s=c[1],l=Object(i.useState)(""),j=Object(r.a)(l,2),b=j[0],u=j[1],h=d.a().shape({email:d.b().required("This field is required!"),password:d.b().required("This field is required!")});return Object(x.jsx)("div",{className:"col-md-12",children:Object(x.jsxs)("div",{className:"card card-container",children:[Object(x.jsx)("img",{src:"//ssl.gstatic.com/accounts/ui/avatar_2x.png",alt:"profile-img",className:"profile-img-card"}),Object(x.jsx)(o.d,{initialValues:{email:"",password:""},validationSchema:h,onSubmit:function(e){var a=e.email,c=e.password;u(""),s(!0),function(e,t){return m.a.post("".concat(p.BACKEND_URL,"/auth/loginWithEmail"),{email:e,password:t}).then((function(e){return e.data.token&&localStorage.setItem("user",JSON.stringify(e.data)),e.data}))}(a,c).then((function(){t.push("/profile"),window.location.reload()}),(function(e){s(!1),u(e.response.data.message||e.message)}))},children:Object(x.jsxs)(o.c,{children:[Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"email",children:"Email"}),Object(x.jsx)(o.b,{name:"email",type:"text",className:"form-control"}),Object(x.jsx)(o.a,{name:"email",component:"div",className:"alert alert-danger"})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"password",children:"Password"}),Object(x.jsx)(o.b,{name:"password",type:"password",className:"form-control"}),Object(x.jsx)(o.a,{name:"password",component:"div",className:"alert alert-danger"})]}),Object(x.jsx)("div",{className:"form-group",children:Object(x.jsxs)("button",{type:"submit",className:"btn btn-primary btn-block",disabled:n,children:[n&&Object(x.jsx)("span",{className:"spinner-border spinner-border-sm"}),Object(x.jsx)("span",{children:"Login"})]})}),b&&Object(x.jsx)("div",{className:"form-group",children:Object(x.jsx)("div",{className:"alert alert-danger",role:"alert",children:b})})]})})]})})},v=function(){var e=Object(i.useState)(!1),t=Object(r.a)(e,2),a=t[0],c=t[1],n=Object(i.useState)(""),s=Object(r.a)(n,2),l=s[0],j=s[1],b=d.a().shape({email:d.b().email("This is not a valid email.").required("This field is required!"),password:d.b().test("len","The password must be between 6 and 40 characters.",(function(e){return e&&e.toString().length>=6&&e.toString().length<=40})).required("This field is required!")});return Object(x.jsx)("div",{className:"col-md-12",children:Object(x.jsxs)("div",{className:"card card-container",children:[Object(x.jsx)("img",{src:"//ssl.gstatic.com/accounts/ui/avatar_2x.png",alt:"profile-img",className:"profile-img-card"}),Object(x.jsx)(o.d,{initialValues:{email:"",password:""},validationSchema:b,onSubmit:function(e){(function(e,t){return m.a.post("".concat(p.BACKEND_URL,"/auth/register"),{email:e,password:t})})(e.email,e.password).then((function(){j("Successfully registered, You can login now!"),c(!0)}),(function(e){j(e.response.data.message||e.message),c(!1)}))},children:Object(x.jsxs)(o.c,{children:[!a&&Object(x.jsxs)("div",{children:[Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"email",children:" Email "}),Object(x.jsx)(o.b,{name:"email",type:"email",className:"form-control"}),Object(x.jsx)(o.a,{name:"email",component:"div",className:"alert alert-danger"})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"password",children:" Password "}),Object(x.jsx)(o.b,{name:"password",type:"password",className:"form-control"}),Object(x.jsx)(o.a,{name:"password",component:"div",className:"alert alert-danger"})]}),Object(x.jsx)("div",{className:"form-group",children:Object(x.jsx)("button",{type:"submit",className:"btn btn-primary btn-block",children:"Sign Up"})})]}),l&&Object(x.jsx)("div",{className:"form-group",children:Object(x.jsx)("div",{className:a?"alert alert-success":"alert alert-danger",role:"alert",children:l})})]})})]})})},N=function(){return Object(x.jsx)("div",{className:"container",children:Object(x.jsx)("header",{className:"jumbotron",children:Object(x.jsx)("h3",{children:"Hola!"})})})},w=function(){var e=O();return Object(x.jsx)("div",{className:"container",children:Object(x.jsxs)("div",{className:"card card-container",children:[Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{children:"Email:"}),Object(x.jsx)("input",{defaultValue:e.user.email.toUpperCase(),className:"form-control",disabled:!0})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{children:"User ID:"}),Object(x.jsx)("input",{defaultValue:e.user._id,className:"form-control",disabled:!0})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{children:"Joined:"}),Object(x.jsx)("input",{defaultValue:e.user.createdAt,className:"form-control",disabled:!0})]})]})})},S=a(5),y=a.n(S),k=a(12),L=a(102),E=a(103),C=function(e,t){return t?"https://ipfs.io/ipfs/".concat(e.split("ipfs://")[1]):"https://ipfs.io/ipfs/".concat(e,"/metadata.json")},F=function(e){var t=f();return m.a.post("".concat(p.BACKEND_URL,"/nftmint"),e,{headers:Object(j.a)({},t)}).then(h)},D=function(){var e=Object(E.a)(),t=e.register,a=e.handleSubmit,c=e.reset,n=Object(i.useState)(),s=Object(r.a)(n,2),l=s[0],o=s[1],d=Object(i.useState)(),b=Object(r.a)(d,2),m=b[0],u=b[1],p=Object(i.useState)(),h=Object(r.a)(p,2),O=h[0],f=h[1],g=Object(L.a)({accept:{"image/*":[".jpeg",".png",".txt"]},onDrop:function(e){o(Object.assign(e[0],{preview:URL.createObjectURL(e[0])}))}}),v=g.getRootProps,N=g.getInputProps,w=a(function(){var e=Object(k.a)(y.a.mark((function e(t){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l){e.next=2;break}return e.abrupt("return",window.alert("Please select the image."));case 2:(a=new FormData).append("name",t.name),a.append("description",t.description),a.append("file",l),c(),o(void 0),f(!1),F(a).then((function(e){f(!0)})).catch((function(e){f(void 0),u(e.response.data.message||e.message)}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return Object(x.jsx)("form",{onSubmit:w,children:Object(x.jsxs)("div",{className:"card w-50",children:[Object(x.jsxs)("div",{className:"form-group",children:[m&&Object(x.jsx)("div",{className:"alert alert-danger",role:"alert",children:m}),O&&Object(x.jsx)("div",{className:"alert alert-success",role:"alert",children:"Successfully minted!"})]}),!1===O?Object(x.jsx)("p",{children:"Minting now, Wait a second..."}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("div",Object(j.a)(Object(j.a)({className:"border rounded mb-2 p-2"},v()),{},{children:[Object(x.jsx)("input",Object(j.a)({},N())),l?Object(x.jsx)("p",{children:l.name}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("p",{children:"Drag and drop a file here, or click to select file"}),Object(x.jsx)("p",{children:Object(x.jsx)("em",{children:"(Only *.jpeg, *.png, *.txt files will be accepted)"})})]})]})),Object(x.jsx)("aside",{children:l&&Object(x.jsx)("img",{src:l.preview,alt:l.name,className:"w-100 mb-2",style:{borderRadius:"0.5rem"}})}),Object(x.jsx)("input",Object(j.a)({id:"outlined-name",placeholder:"Name",className:"border rounded mb-2 p-2"},t("name",{required:!0}))),Object(x.jsx)("textarea",Object(j.a)({id:"outlined-description",placeholder:"Description",className:"border rounded mb-2 p-2"},t("description",{required:!0}))),Object(x.jsx)("button",{type:"submit",className:"btn btn-success",children:"Mint"})]})]})})},K=function(){var e=f();return m.a.post("".concat(p.BACKEND_URL,"/wallet"),{},{headers:Object(j.a)({},e)}).then(h)},I=function(){var e=Object(i.useState)(),t=Object(r.a)(e,2),a=t[0],c=t[1],n=Object(i.useState)(),s=Object(r.a)(n,2),l=s[0],o=s[1],d=Object(i.useState)(!1),b=Object(r.a)(d,2),u=b[0],h=b[1],O=Object(i.useCallback)((function(){(function(){var e=f();return m.a.get("".concat(p.BACKEND_URL,"/wallet"),{headers:Object(j.a)({},e)})})().then((function(e){c(e.data)})).catch((function(e){return console.warn(e.response.data.message||e.message)}))}),[]);Object(i.useEffect)((function(){O()}),[O]);var g=function(){var e=Object(k.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:K().then((function(e){c(e)})).catch((function(e){o(e.response.data.message||e.message)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(x.jsxs)("div",{className:"card w-50",children:[l&&Object(x.jsx)("div",{className:"form-group",children:Object(x.jsx)("div",{className:"alert alert-danger",role:"alert",children:l})}),a?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{children:"Public Key"}),Object(x.jsx)("input",{className:"form-control",defaultValue:a.publicKey})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{children:"Private Key"}),Object(x.jsx)("input",{type:u?"text":"password",className:"form-control",defaultValue:a.privateKey})]}),Object(x.jsx)("button",{className:"btn btn-info",onClick:function(){h((function(e){return!e}))},children:u?"Hide Private Key":"Show Private Key"})]}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("p",{children:"Click the button below to create your own wallet!"}),Object(x.jsx)("button",{className:"btn btn-success",onClick:g,children:"Generate Wallet"})]})]})},U=a(100),A=function(e){var t=e.nft,a=Object(i.useState)(),c=Object(r.a)(a,2),n=c[0],s=c[1],l=Object(i.useState)(),o=Object(r.a)(l,2),d=o[0],j=o[1],b=Object(i.useCallback)((function(){var e;"image"===t.data.type&&(e=t.data.ipnft,m.a.get("".concat(C(e)))).then((function(e){s(e.data)})).catch((function(e){s(!1),j(e.response.data.message||e.message)}))}),[t]);return Object(i.useEffect)((function(){b()}),[b]),Object(x.jsx)("div",{className:"col-lg=3 col-md-4 col-sm-6 col-xs-12",children:Object(x.jsxs)("div",{className:"card mt-2",children:[d&&Object(x.jsx)("div",{className:"form-group",children:Object(x.jsx)("div",{className:"alert alert-danger",role:"alert",children:d})}),"image"===t.data.type?n?"object"===typeof n&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(U.LazyLoadImage,{alt:n.name,width:"100%",height:"100%",src:C(n.image,!0)}),Object(x.jsxs)("div",{children:["Name: ",n.name]}),Object(x.jsxs)("div",{children:["Description: ",n.description]})]}):Object(x.jsx)("p",{children:"Loading from IPFS..."}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("textarea",{defaultValue:t.data.data.toString(),style:{minHeight:218},disabled:!0}),Object(x.jsxs)("div",{children:["Name: ",t.data.name]}),Object(x.jsxs)("div",{children:["Description: ",t.data.description]})]})]})})},_=function(){var e=Object(i.useState)([]),t=Object(r.a)(e,2),a=t[0],c=t[1],n=Object(i.useCallback)((function(){m.a.get("".concat(p.BACKEND_URL,"/nftmint")).then((function(e){c(e.data)})).catch((function(e){return console.warn(e.response.data.message||e.message)}))}),[]);return Object(i.useEffect)((function(){n()}),[n]),Object(x.jsx)("div",{className:"col-md-12 row d-grid gap-2",children:a.map((function(e){return Object(x.jsx)(A,{nft:e},"nft-card-".concat(e.nftId))}))})},P=(a(235),a(236),function(){var e=Object(i.useState)(),t=Object(r.a)(e,2),a=t[0],c=t[1];Object(i.useEffect)((function(){var e=O();return e&&c(e),u.on("logout",n),function(){u.remove("logout",n)}}),[]);var n=function(){localStorage.removeItem("user"),c(void 0),window.location.href="/login"};return Object(x.jsxs)("div",{children:[Object(x.jsxs)("nav",{className:"navbar navbar-expand navbar-dark bg-dark",children:[Object(x.jsx)(s.b,{to:"/",className:"navbar-brand",children:"NFT mint"}),Object(x.jsx)("div",{className:"navbar-nav mr-auto",children:p.NAV_LINKS.map((function(e){return(e.public||a)&&Object(x.jsx)("li",{className:"nav-item",children:Object(x.jsx)(s.b,{to:e.path,className:"nav-link",children:e.label})},"nav-link-".concat(e.label))}))}),a?Object(x.jsxs)("div",{className:"navbar-nav ml-auto",children:[Object(x.jsx)("li",{className:"nav-item",children:Object(x.jsx)(s.b,{to:"/profile",className:"nav-link",children:a.user.email})}),Object(x.jsx)("li",{className:"nav-item",children:Object(x.jsx)("a",{href:"/login",className:"nav-link",onClick:n,children:"LogOut"})})]}):Object(x.jsxs)("div",{className:"navbar-nav ml-auto",children:[Object(x.jsx)("li",{className:"nav-item",children:Object(x.jsx)(s.b,{to:"/login",className:"nav-link",children:"Login"})}),Object(x.jsx)("li",{className:"nav-item",children:Object(x.jsx)(s.b,{to:"/register",className:"nav-link",children:"Sign Up"})})]})]}),Object(x.jsx)("div",{className:"container mt-3",children:Object(x.jsxs)(l.c,{children:[Object(x.jsx)(l.a,{exact:!0,path:["/","/home"],component:N}),Object(x.jsx)(l.a,{exact:!0,path:"/login",component:g}),Object(x.jsx)(l.a,{exact:!0,path:"/register",component:v}),a&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(l.a,{exact:!0,path:"/profile",component:w}),Object(x.jsx)(l.a,{path:"/wallet",component:I}),Object(x.jsx)(l.a,{path:"/mint",component:D}),Object(x.jsx)(l.a,{path:"/gallery",component:_})]})]})})]})}),R=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,241)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,s=t.getLCP,r=t.getTTFB;a(e),c(e),n(e),s(e),r(e)}))};!function(){var e=O(),t=f();if(e)m.a.post("".concat(p.BACKEND_URL,"/auth/refreshToken"),{token:e.token},{headers:Object(j.a)({},t)}).then((function(e){return e.data.token&&localStorage.setItem("user",JSON.stringify(e.data)),e.data})).catch((function(e){return u.dispatch("logout"),!1}))}(),n.a.render(Object(x.jsx)(s.a,{children:Object(x.jsx)(P,{})}),document.getElementById("root")),R()}},[[240,1,2]]]);
//# sourceMappingURL=main.3b1e2b65.chunk.js.map